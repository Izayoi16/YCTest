@model YC.House
@{
    List<YC.Sales> sales = ViewBag.sales;
}

<h2>Create House</h2>

@Html.Hidden("Id", Model.Id, new { @id = "txtId" })
<div>
    <label for="Title">Title:</label>
    @Html.TextBox("Title", Model.Title, new { @required = "required", @id = "txtTitle" })
</div>
<div>
    <label for="Local">Local:</label>
    @Html.TextBox("Local", Model.Local, new { @required = "required", @id = "txtLocal" })
</div>
<div>
    <label for="Master">Master:</label>
    @Html.TextBox("Master", Model.Master, new { @required = "required", @id = "txtMaster" })
</div>
<div>
    <label for="MasterPhone">Master Phone:</label>
    @Html.TextBox("MasterPhone", Model.MasterPhone, new { @required = "required", @id = "txtMasterPhone" })
</div>
<div>
    <label for="Sales">Sales:</label>
    <select name="Sales" id="txtSales">
        @foreach (var data in sales)
        {
            <option value="@data.Id">@data.Name</option>
        }
    </select>
</div>
<div>
    <label for="Price">Price:</label>
    @Html.TextBox("Price", Model.Price, new { @required = "required", @id = "txtPrice", inputmode = "decimal", type = "number", min = "0.00", step = "0.01" })
</div>

<button id="Update">Update</button>
<button id="Delete">Delete</button>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function() {
        $("#Update").click(function(e) {
            e.preventDefault();

            var HouseData = {
                Id: $("#txtId").val(),
                Title: $("#txtTitle").val(),
                Local: $("#txtLocal").val(),
                Master: $("#txtMaster").val(),
                MasterPhone: $("#txtMasterPhone").val(),
                Sales: $("#txtSales").val(),
                Price: $("#txtPrice").val(),
            };

            $.ajax({
                url: '@Url.Action("House", "API")',
                type: 'PUT',
                data: HouseData,
                success: function(response) {
                    alert('Successfully added!');
                },
                error: function(error) {
                    alert('Error adding data.');
                }
            });
        });
        $("#Delete").click(function(e) {
            e.preventDefault();

            var HouseData = {
                Id: $("#txtId").val(),
            };

            $.ajax({
                url: '@Url.Action("House", "API")',
                type: 'Delete',
                data: HouseData,
                success: function(response) {
                    alert('Successfully added!');
                },
                error: function(error) {
                    alert('Error adding data.');
                }
            });
        });
    });
</script>
